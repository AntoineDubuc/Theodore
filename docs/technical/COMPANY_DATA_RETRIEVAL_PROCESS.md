# ğŸ”„ Theodore Company Data Retrieval Process

This document provides a comprehensive overview of how Theodore retrieves and processes company data through its intelligent pipeline.

## ğŸ“Š Complete Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           THEODORE COMPANY DATA RETRIEVAL PIPELINE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER INPUT    â”‚    â”‚   DISCOVERY     â”‚    â”‚   PROCESSING    â”‚    â”‚   STORAGE &     â”‚
â”‚                 â”‚    â”‚   PATHWAYS      â”‚    â”‚   PIPELINE      â”‚    â”‚   RETRIEVAL     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼                       â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. USER INTERACTION LAYER                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Discovery Tab  â”‚   â”‚  Process Tab    â”‚   â”‚  Database Tab   â”‚                  â”‚
â”‚  â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚                  â”‚
â”‚  â”‚ â€¢ Company Name  â”‚   â”‚ â€¢ Company Name  â”‚   â”‚ â€¢ Browse All    â”‚                  â”‚
â”‚  â”‚ â€¢ Find Similar  â”‚   â”‚ â€¢ Website URL   â”‚   â”‚ â€¢ Filter/Search â”‚                  â”‚
â”‚  â”‚                 â”‚   â”‚ â€¢ Process New   â”‚   â”‚ â€¢ View Details  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚           â”‚                       â”‚                       â”‚                       â”‚
â”‚           â–¼                       â–¼                       â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     FLASK API ENDPOINTS                                     â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚ /api/discover    /api/process-company    /api/database    /api/companies   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. DISCOVERY PATHWAYS                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    SIMILARITY DISCOVERY WORKFLOW                            â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚  Company Name Input â†’ SimpleEnhancedDiscovery                              â”‚  â”‚
â”‚  â”‚           â”‚                      â”‚                                         â”‚  â”‚
â”‚  â”‚           â–¼                      â–¼                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Database Checkâ”‚    â”‚           LLM DISCOVERY METHODS                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚               â”‚    â”‚                                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Pinecone      â”‚    â”‚ 1. Contextual Discovery (for existing companies)â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ find_by_name  â”‚    â”‚    â€¢ Use company description/industry           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚               â”‚    â”‚    â€¢ Generate contextual search terms           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â€¢ Find semantic matches                      â”‚  â”‚  â”‚
â”‚  â”‚          â”‚            â”‚                                                 â”‚  â”‚  â”‚
â”‚  â”‚          â–¼            â”‚ 2. Unknown Company Discovery                    â”‚  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â€¢ LLM infers industry/business model        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ IF FOUND:     â”‚    â”‚    â€¢ Generates search strategy                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Vector Search â”‚    â”‚    â€¢ Finds similar companies by inference      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ + LLM Context â”‚    â”‚                                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚               â”‚    â”‚ 3. Vector Similarity Search                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ IF NOT FOUND: â”‚    â”‚    â€¢ Embedding comparison                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ LLM-only      â”‚    â”‚    â€¢ Cosine similarity ranking                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Discovery     â”‚    â”‚    â€¢ Industry/business model filtering         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. INTELLIGENT PROCESSING PIPELINE                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   4-PHASE INTELLIGENT SCRAPING SYSTEM                       â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ PHASE 1: COMPREHENSIVE LINK DISCOVERY                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ robots.txt â†’ sitemap.xml â†’ recursive_crawling â†’ up_to_1000_links     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚     â”‚              â”‚              â”‚                       â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚     â–¼              â–¼              â–¼                       â–¼          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Additional    Structured     Navigation      Comprehensive          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Paths +       Site Map       Links +         Link Set               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Sitemaps                     Content                                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                    â”‚                                      â”‚  â”‚
â”‚  â”‚                                    â–¼                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ PHASE 2: LLM-DRIVEN PAGE SELECTION                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ All_Discovered_Links â†’ Gemini_2.5_Flash â†’ Intelligent_Selection      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                               â”‚                       â”‚               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                               â–¼                       â–¼               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                     Analyze_Link_Patterns    Select_10-50_Pages       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                     â€¢ /contact, /about       â€¢ Highest_Value         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                     â€¢ /team, /careers        â€¢ Contact_Info          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                     â€¢ /products, /services   â€¢ Leadership_Data       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                     â€¢ Business_Intelligence  â€¢ Company_History       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                    â”‚                                      â”‚  â”‚
â”‚  â”‚                                    â–¼                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ PHASE 3: PARALLEL CONTENT EXTRACTION                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Selected_URLs â†’ Crawl4AI_AsyncWebCrawler â†’ Parallel_Processing       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚      â”‚                     â”‚                         â”‚               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚      â–¼                     â–¼                         â–¼               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ 10_Concurrent       Chromium_Browser         Clean_Text_Extraction   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Requests           JavaScript_Execution      Remove_Nav/Footer       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                    Dynamic_Content           Preserve_Main_Content   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Real-time Progress Updates â†’ Progress_Logger â†’ Live_UI_Feedback      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                    â”‚                                      â”‚  â”‚
â”‚  â”‚                                    â–¼                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ PHASE 4: LLM CONTENT AGGREGATION                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ All_Page_Content â†’ Gemini_2.5_Pro â†’ Sales_Intelligence_Summary       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚      â”‚                    â”‚                      â”‚                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚      â–¼                    â–¼                      â–¼                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Up_to_5000_chars    1M_Token_Context    2-3_Paragraph_Summary        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Per_Page           Complete_Analysis    Business_Intelligence         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Combined_Content   Company_Insights     Sales_Optimized              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         AI ANALYSIS & ENHANCEMENT                          â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚ Sales_Intelligence â†’ AI_Model_Analysis â†’ Structured_Data_Extraction         â”‚  â”‚
â”‚  â”‚                            â”‚                         â”‚                     â”‚  â”‚
â”‚  â”‚                            â–¼                         â–¼                     â”‚  â”‚
â”‚  â”‚                    Bedrock_Client              Company_Data_Object          â”‚  â”‚
â”‚  â”‚                    â€¢ Industry_Classification   â€¢ Business_Model            â”‚  â”‚
â”‚  â”‚                    â€¢ Business_Model_Analysis   â€¢ Target_Market             â”‚  â”‚
â”‚  â”‚                    â€¢ Market_Positioning        â€¢ Value_Proposition         â”‚  â”‚
â”‚  â”‚                    â€¢ Company_Stage_Assessment  â€¢ Technology_Stack          â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚ Enhanced_Extraction â†’ Gemini_Client â†’ Additional_Field_Extraction          â”‚  â”‚
â”‚  â”‚ (if_missing_data)         â”‚                    â”‚                           â”‚  â”‚
â”‚  â”‚                           â–¼                    â–¼                           â”‚  â”‚
â”‚  â”‚                    Detailed_Analysis    â€¢ Founding_Year                    â”‚  â”‚
â”‚  â”‚                    JSON_Parsing         â€¢ Employee_Count                   â”‚  â”‚
â”‚  â”‚                                        â€¢ Social_Media_Links               â”‚  â”‚
â”‚  â”‚                                        â€¢ Leadership_Team                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. STORAGE & RETRIEVAL SYSTEM                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                           VECTOR EMBEDDING GENERATION                       â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚ Company_Data â†’ Embedding_Text_Preparation â†’ Bedrock_Embedding_Generation    â”‚  â”‚
â”‚  â”‚     â”‚                    â”‚                           â”‚                     â”‚  â”‚
â”‚  â”‚     â–¼                    â–¼                           â–¼                     â”‚  â”‚
â”‚  â”‚ Structured_Fields   Text_Concatenation      1536_Dimension_Vector          â”‚  â”‚
â”‚  â”‚ â€¢ Description       â€¢ Name + Industry       Amazon_Titan_Embeddings        â”‚  â”‚
â”‚  â”‚ â€¢ Industry          â€¢ Business_Model        Semantic_Representation        â”‚  â”‚
â”‚  â”‚ â€¢ Business_Model    â€¢ Description                                          â”‚  â”‚
â”‚  â”‚ â€¢ Target_Market     â€¢ Key_Services                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚                                           â”‚
â”‚                                       â–¼                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                           PINECONE VECTOR DATABASE                          â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚ â”‚   UPSERT OPS    â”‚  â”‚  RETRIEVAL OPS  â”‚  â”‚     SIMILARITY SEARCH       â”‚  â”‚  â”‚
â”‚  â”‚ â”‚                 â”‚  â”‚                 â”‚  â”‚                             â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ Store_Vector  â”‚  â”‚ â€¢ find_by_name  â”‚  â”‚ â€¢ Vector_Similarity         â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ Store_Metadataâ”‚  â”‚ â€¢ find_by_id    â”‚  â”‚ â€¢ Cosine_Distance           â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ Update_Existingâ”‚ â”‚ â€¢ get_all       â”‚  â”‚ â€¢ Industry_Filtering        â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ Deduplicate   â”‚  â”‚ â€¢ browse_paginatedâ”‚ â”‚ â€¢ Business_Model_Matching  â”‚  â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚ Essential_Metadata_Fields (Optimized_Storage):                             â”‚  â”‚
â”‚  â”‚ â€¢ company_name, industry, business_model, location, company_size           â”‚  â”‚
â”‚  â”‚ â€¢ sales_intelligence_summary, research_status, last_updated               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚                                           â”‚
â”‚                                       â–¼                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                           RETRIEVAL & PRESENTATION                          â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚ Database_Query â†’ Data_Formatting â†’ UI_Presentation                         â”‚  â”‚
â”‚  â”‚      â”‚                 â”‚                    â”‚                              â”‚  â”‚
â”‚  â”‚      â–¼                 â–¼                    â–¼                              â”‚  â”‚
â”‚  â”‚ â€¢ Search_by_Name   â€¢ JSON_Response     â€¢ Discovery_Cards                   â”‚  â”‚
â”‚  â”‚ â€¢ Similarity_Search â€¢ Company_Details  â€¢ Research_Modals                   â”‚  â”‚
â”‚  â”‚ â€¢ Browse_All       â€¢ Research_Status   â€¢ Database_Browser                  â”‚  â”‚
â”‚  â”‚ â€¢ Filter_Results   â€¢ Website_Links     â€¢ Real-time_Updates                 â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚ Real-time_Progress_Tracking:                                               â”‚  â”‚
â”‚  â”‚ Progress_Logger â†’ SSE_Events â†’ Live_UI_Updates                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Sequences

### 1. Discovery Workflow

```
User Input (Company Name)
    â†“
Flask /api/discover endpoint
    â†“
SimpleEnhancedDiscovery.discover_similar_companies()
    â†“
â”Œâ”€ Database Check (Pinecone.find_company_by_name)
â”‚     â”œâ”€ FOUND â†’ LLM Contextual Discovery + Vector Similarity
â”‚     â””â”€ NOT FOUND â†’ LLM-only Discovery (infer industry/business model)
    â†“
ResearchManager.enhance_discovered_companies()
    â†“
Format results with research_status, confidence, reasoning
    â†“
JSON Response â†’ UI Display (Discovery Cards)
```

### 2. Company Processing Workflow

```
User Input (Company Name + Website)
    â†“
Flask /api/process-company endpoint
    â†“
TheodoreIntelligencePipeline.process_single_company()
    â†“
â”Œâ”€ Get or Create Company (prevent duplicates)
    â†“
IntelligentCompanyScraperSync.scrape_company()
    â”œâ”€ Phase 1: Link Discovery (robots.txt + sitemap + recursive)
    â”œâ”€ Phase 2: LLM Page Selection (Gemini 2.5 Flash)
    â”œâ”€ Phase 3: Parallel Extraction (Crawl4AI + 10 concurrent)
    â””â”€ Phase 4: Content Aggregation (Gemini 2.5 Pro + 1M context)
    â†“
BedrockClient.analyze_company_content()
    â”œâ”€ Industry Classification
    â”œâ”€ Business Model Analysis
    â””â”€ Market Positioning
    â†“
Enhanced Extraction (if missing fields)
    â”œâ”€ GeminiClient.analyze_content()
    â””â”€ JSON parsing for founding_year, employee_count, social_media
    â†“
BedrockClient.generate_embedding()
    â”œâ”€ Prepare embedding text (name + industry + description)
    â””â”€ Amazon Titan Embeddings (1536 dimensions)
    â†“
PineconeClient.upsert_company()
    â”œâ”€ Store vector representation
    â”œâ”€ Store essential metadata
    â””â”€ Update existing if duplicate
    â†“
Success Response â†’ UI Update (Process Tab)
```

### 3. Database Retrieval Workflow

```
User Browse Request
    â†“
Flask /api/database endpoint
    â†“
PineconeClient.get_all_companies()
    â”œâ”€ Retrieve all vectors with metadata
    â”œâ”€ Extract essential fields
    â””â”€ Sort by company name
    â†“
Enhance with detailed metadata
    â”œâ”€ Extract full company information
    â”œâ”€ Calculate statistics
    â””â”€ Format for UI display
    â†“
JSON Response â†’ Database Browser UI
    â”œâ”€ Company cards with website links
    â”œâ”€ Research status indicators
    â””â”€ One-click access to company websites
```

## ğŸ§© Key Components Interaction

### AI Models Hierarchy

1. **Primary Analysis**: Gemini 2.5 Pro (1M context for content aggregation)
2. **Page Selection**: Gemini 2.5 Flash Preview (fast link analysis)  
3. **Cost-Optimized**: Amazon Nova Pro (6x cheaper for research)
4. **Fallback**: OpenAI GPT-4o-mini (when others fail)

### Storage Optimization

**Essential Metadata (5 fields):**
- `company_name`, `industry`, `business_model`, `location`, `company_size`

**vs Original Schema (62+ fields):**
- 72% storage reduction while maintaining search quality

### Real-time Progress System

```
Progress_Logger (Thread-safe)
    â†“
Phase-specific logging with emoji prefixes
    â”œâ”€ ğŸ” LINK DISCOVERY
    â”œâ”€ ğŸ¯ PAGE SELECTION  
    â”œâ”€ ğŸ“„ CONTENT EXTRACTION
    â””â”€ ğŸ§  AI AGGREGATION
    â†“
Server-Sent Events (SSE) â†’ Live UI Updates
```

## ğŸ“Š Performance Characteristics

- **Link Discovery**: Up to 1000 links per company
- **Page Selection**: 10-50 most valuable pages
- **Parallel Processing**: 10 concurrent extractions
- **Content Analysis**: 1M+ token context window
- **Vector Dimensions**: 1536 (Amazon Titan)
- **Processing Time**: 25-60 seconds per company
- **Storage Efficiency**: 72% metadata reduction

## ğŸ”§ Error Handling & Fallbacks

1. **Graceful Degradation**: AI analysis â†’ web search â†’ manual fallback
2. **Timeout Management**: Tiered timeouts (UI: 25s, Testing: 60s)
3. **Progress Tracking**: Real-time status with detailed error messages
4. **Model Failover**: Primary â†’ Cost-optimized â†’ Fallback AI models

This comprehensive data retrieval process ensures Theodore can extract meaningful company intelligence using sophisticated AI methods while providing real-time feedback and maintaining high performance standards.